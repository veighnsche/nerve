# ðŸ§¬ The Nerve Constitution (v2)

## 0. Purpose

This amendment extends the Nerve Constitution with the latest binding decisions (ADR-011 through ADR-018).
It does not replace v1 â€” it adds ratified policies covering error handling, proofs, UI, networking, versioning, testing, narration, and security.

---

## 1. Core Principles (Reaffirmed)

1. **Explicit > Implicit** â€” all new surfaces remain explainable and auditable.
2. **Anti-Insanity** â€” no retries, no hidden fallbacks, no console hijack.
3. **Artifacts First** â€” proofs and bundles are primary testable outputs.
4. **Userland Control** â€” retries, policies, and UI assembly remain with repos.

---

## 2. Ratified Extensions

### Error Handling (ADR-011)

* All primitives and server bindings return structured `NrvError`.
* Panics only for programmer invariants.
* Retries/fallbacks live in userland.

### Proof Bundles (ADR-012)

* Standard JSONL schema with attachments.
* Immediate, durable appends.
* Narration recorded as data; never synthesized by core.

### UI / Interaction (ADR-013)

* Core = minimal applets (`step`, `prompt`, `diff`, `progress`).
* Full UI Kit lives in separate package, opt-in only.
* Always degradable to JSON mode for CI.

### Networking & Orchestration (ADR-014)

* Mandatory contract: `capabilities`, `enqueue`, `stream`, `cancel`.
* SSE error frames + enriched capabilities required.
* All events pass through for Proof Bundles.

### Versioning (ADR-015)

* Pre-v2: **zero compatibility guarantees**.
* v1: artifact-stable only.
* v2+: backwards compatibility contract begins.

### Testing (ADR-016)

* Multi-layer: unit, property, contract, BDD, determinism, metrics lint.
* CI gates enforce determinism, forbid flakiness.
* Proof Bundles are test artifacts.

### Narration & Logging (ADR-018)

* Narration from orch is surfaced, never generated by core.
* Core exposes applets (`log.human`, `section`, etc.); repos build story loggers.
* Proof Bundles carry narration as plain data.

### Security Boundaries (ADR-017)

* Nerve core never manages secrets.
* Users rely on host language conventions (`env`, dotenv, config crates).
* Logs/proofs must redact sensitive values.

---

## 3. Final Consequences

* Nerve now has binding policies for **errors, proofs, UI, networking, versioning, testing, narration, and secrets**.
* All remain consistent with v1 Constitution principles.
* Repos get both **minimal primitives** and **optional batteries** (UI Kit) without polluting core.
* The orchestrator must comply with defined contracts; Nerve does not wait on implementation.

---

ðŸ“œ **Ratified by ADRs 011, 012, 013, 014, 015, 016, 017, 018.**
Together with Constitution v1 (ratifying ADRs 002, 005, 006, 007, 008, 009, 010), this forms the full binding Constitution of Nerve.
